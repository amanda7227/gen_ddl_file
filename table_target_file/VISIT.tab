-- CHANGED BY: Amanda Lee
-- CHANGE DATE: 2019-07-24
-- CHANGE REASON: [CPFH-476][CIE]New data model for patient visit info
Create table VISIT
(
ID_VISIT       NUMBER(24) NOT NULL,
FLG_STATUS     VARCHAR2(002 CHAR) NOT NULL,
ID_CITIZEN     NUMBER(24) NOT NULL,
ID_INSTITUTION NUMBER(24) NOT NULL,
DT_BEGIN_TSTZ  TIMESTAMP(6) WITH LOCAL TIME ZONE NOT NULL,
DT_END_TSTZ    TIMESTAMP(6) WITH LOCAL TIME ZONE,
DT_CREATION    TIMESTAMP(6) WITH LOCAL TIME ZONE
);
-- Add comments to the table
COMMENT ON TABLE VISIT IS 'Patient visitations to the institution';
-- Add comments to the columns
COMMENT ON column VISIT.ID_VISIT IS 'ID_VISIT'; 
COMMENT ON column VISIT.FLG_STATUS IS 'FLG_STATUS'; 
COMMENT ON column VISIT.ID_CITIZEN IS 'ID_CITIZEN'; 
COMMENT ON column VISIT.ID_INSTITUTION IS 'ID_INSTITUTION'; 
COMMENT ON column VISIT.DT_BEGIN_TSTZ IS 'DT_BEGIN_TSTZ'; 
COMMENT ON column VISIT.DT_END_TSTZ IS 'DT_END_TSTZ'; 
COMMENT ON column VISIT.DT_CREATION IS 'DT_CREATION'; 

-- Create/Recreate primary, unique and foreign key constraints
ALTER TABLE VISIT add CONSTRAINT VISIT_PK  primary key(ID_VISIT); 
-- CHANGE END: Amanda Lee